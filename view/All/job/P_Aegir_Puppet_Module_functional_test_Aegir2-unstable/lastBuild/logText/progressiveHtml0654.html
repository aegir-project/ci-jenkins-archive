Started by user Guillaume Boudrias
Building in workspace /var/lib/jenkins/jobs/P_Aegir_Puppet_Module_functional_test_Aegir2-unstable/workspace
 &gt; git rev-parse --is-inside-work-tree # timeout=10
Fetching changes from the remote Git repository
 &gt; git config remote.origin.url <a href='http://git.drupal.org/project/puppet-aegir.git'>http://git.drupal.org/project/puppet-aegir.git</a> # timeout=10
Fetching upstream changes from <a href='http://git.drupal.org/project/puppet-aegir.git'>http://git.drupal.org/project/puppet-aegir.git</a>
 &gt; git --version # timeout=10
 &gt; git -c core.askpass=true fetch --tags --progress <a href='http://git.drupal.org/project/puppet-aegir.git'>http://git.drupal.org/project/puppet-aegir.git</a> +refs/heads/*:refs/remotes/origin/*
 &gt; git rev-parse origin/1.0.x^{commit} # timeout=10
Checking out Revision 35b46c5810b54cb7055e79c2a9f085bd1b4d7de5 (origin/1.0.x)
 &gt; git config core.sparsecheckout # timeout=10
 &gt; git checkout -f 35b46c5810b54cb7055e79c2a9f085bd1b4d7de5
 &gt; git rev-list 35b46c5810b54cb7055e79c2a9f085bd1b4d7de5 # timeout=10
 &gt; git tag -a -f -m Jenkins Build #13 jenkins-P_Aegir_Puppet_Module_functional_test_Aegir2-unstable-13 # timeout=10
[workspace] $ /bin/sh -xe /tmp/hudson4342430900782390398.sh
+ ./tests/functional_tests/aegir2-unstable/setup.sh
Already up-to-date.
From <a href='http://git.drupal.org/project/puppet-aegir'>http://git.drupal.org/project/puppet-aegir</a>
 * [new branch]      unstable   -&gt; origin/unstable
Already up-to-date.
==&gt; default: Destroying VM and associated drives...
==&gt; default: Running cleanup tasks for 'puppet' provisioner...
[workspace] $ /bin/sh -xe /tmp/hudson3624882435958632928.sh
+ ./tests/functional_tests/aegir2-unstable/run-tests.sh
Bringing machine 'default' up with 'virtualbox' provider...
==&gt; default: Importing base box 'raring64'...
Progress: 90%==&gt; default: Matching MAC address for NAT networking...
==&gt; default: Setting the name of the VM: workspace_default_1440706571039_73509
==&gt; default: Clearing any previously set forwarded ports...
==&gt; default: Fixed port collision for 22 =&gt; 2222. Now on port 2205.
==&gt; default: Clearing any previously set network interfaces...
==&gt; default: Preparing network interfaces based on configuration...
    default: Adapter 1: nat
==&gt; default: Forwarding ports...
    default: 22 =&gt; 2205 (adapter 1)
==&gt; default: Booting VM...
==&gt; default: Waiting for machine to boot. This may take a few minutes...
    default: SSH address: 127.0.0.1:2205
    default: SSH username: vagrant
    default: SSH auth method: private key
    default: Warning: Connection timeout. Retrying...
==&gt; default: Machine booted and ready!
==&gt; default: Checking for guest additions in VM...
    default: The guest additions on this VM do not match the installed version of
    default: VirtualBox! In most cases this is fine, but in rare cases it can
    default: prevent things such as shared folders from working properly. If you see
    default: shared folder errors, please make sure the guest additions within the
    default: virtual machine match the version of VirtualBox you have installed on
    default: your host and reload your VM.
    default: 
    default: Guest Additions Version: 4.2.10
    default: VirtualBox Version: 4.3
==&gt; default: Setting hostname...
==&gt; default: Mounting shared folders...
    default: /vagrant =&gt; /var/lib/jenkins/jobs/P_Aegir_Puppet_Module_functional_test_Aegir2-unstable/workspace
    default: /var/cache/apt/archives =&gt; /var/lib/jenkins/jobs/P_Aegir_Puppet_Module_functional_test_Aegir2-unstable/workspace/tmp/apt/cache
    default: /tmp/vagrant-puppet-3/manifests =&gt; /var/lib/jenkins/jobs/P_Aegir_Puppet_Module_functional_test_Aegir2-unstable/workspace/tests/functional_tests/aegir2-unstable
    default: /tmp/vagrant-puppet-3/modules-0 =&gt; /var/lib/jenkins/jobs/P_Aegir_Puppet_Module_functional_test_Aegir2-unstable/workspace/tests/functional_tests/aegir2-unstable/modules
==&gt; default: Running provisioner: puppet...
==&gt; default: Running Puppet with nodes.pp...
==&gt; default: warning: Could not retrieve fact fqdn
==&gt; default: warning: Host is missing hostname and/or domain: aegir2-unstable
==&gt; default: err: /Stage[main]/Drush::Apt::Update/Exec[drush_apt_update]/returns: change from notrun to 0 failed: apt-get update &amp;&amp; /usr/bin/apt-get autoclean returned 100 instead of one of [0] at /tmp/vagrant-puppet-3/modules-0/drush/manifests/apt/update.pp:13
==&gt; default: err: /Stage[main]/Drush/Package[drush]/ensure: change from purged to present failed: Execution of '/usr/bin/apt-get -q -y -o DPkg::Options::=--force-confold install drush' returned 100: Reading package lists...
==&gt; default: Building dependency tree...
==&gt; default: Reading state information...
==&gt; default: The following extra packages will be installed:
==&gt; default:   libmysqlclient18 mysql-common php-console-table php-pear php5-cli
==&gt; default:   php5-common php5-mysql
==&gt; default: Suggested packages:
==&gt; default:   git mysql-client drupal php5-dev
==&gt; default: The following NEW packages will be installed:
==&gt; default:   drush libmysqlclient18 mysql-common php-console-table php-pear php5-cli
==&gt; default:   php5-common php5-mysql
==&gt; default: 0 upgraded, 8 newly installed, 0 to remove and 0 not upgraded.
==&gt; default: Need to get 0 B/4805 kB of archives.
==&gt; default: After this operation, 17.0 MB of additional disk space will be used.
==&gt; default: WARNING: The following packages cannot be authenticated!
==&gt; default:   mysql-common libmysqlclient18 php5-common php5-cli php5-mysql php-pear
==&gt; default:   php-console-table drush
==&gt; default: E: There are problems and -y was used without --force-yes
==&gt; default: notice: /Stage[main]/Aegir/File[/etc/apt/preferences.d/drush.pref]: Dependency Package[drush] has failures: true
==&gt; default: warning: /Stage[main]/Aegir/File[/etc/apt/preferences.d/drush.pref]: Skipping because of failed dependencies
==&gt; default: notice: /Stage[main]/Aegir/File[/etc/apt/preferences.d/drush-squeeze.pref]: Dependency Package[drush] has failures: true
==&gt; default: warning: /Stage[main]/Aegir/File[/etc/apt/preferences.d/drush-squeeze.pref]: Skipping because of failed dependencies
==&gt; default: notice: /Stage[main]/Aegir/Aegir::Apt::Debconf[aegir/webserver string apache2]/Exec[aegir/webserver string apache2]: Dependency Package[drush] has failures: true
==&gt; default: warning: /Stage[main]/Aegir/Aegir::Apt::Debconf[aegir/webserver string apache2]/Exec[aegir/webserver string apache2]: Skipping because of failed dependencies
==&gt; default: notice: /Stage[main]/Aegir/Package[aegir]: Dependency Package[drush] has failures: true
==&gt; default: warning: /Stage[main]/Aegir/Package[aegir]: Skipping because of failed dependencies
==&gt; default: notice: /Stage[main]/Aegir::Mysql/File[/root/.my.cnf]/ensure: defined content as '{md5}4a46211f6cffff92d3d53a924772edd3'
==&gt; default: err: /Stage[main]/Aegir::Mysql/Package[mysql-server]/ensure: change from purged to present failed: Execution of '/usr/bin/apt-get -q -y -o DPkg::Options::=--force-confold install mysql-server' returned 100: Reading package lists...
==&gt; default: Building dependency tree...
==&gt; default: Reading state information...
==&gt; default: The following extra packages will be installed:
==&gt; default:   libaio1 libdbd-mysql-perl libdbi-perl libhtml-template-perl libmysqlclient18
==&gt; default:   libnet-daemon-perl libplrpc-perl libterm-readkey-perl mysql-client-5.5
==&gt; default:   mysql-client-core-5.5 mysql-common mysql-server-5.5 mysql-server-core-5.5
==&gt; default: Suggested packages:
==&gt; default:   libipc-sharedcache-perl tinyca mailx
==&gt; default: The following NEW packages will be installed:
==&gt; default:   libaio1 libdbd-mysql-perl libdbi-perl libhtml-template-perl libmysqlclient18
==&gt; default:   libnet-daemon-perl libplrpc-perl libterm-readkey-perl mysql-client-5.5
==&gt; default:   mysql-client-core-5.5 mysql-common mysql-server mysql-server-5.5
==&gt; default:   mysql-server-core-5.5
==&gt; default: 0 upgraded, 14 newly installed, 0 to remove and 0 not upgraded.
==&gt; default: Need to get 0 B/26.8 MB of archives.
==&gt; default: After this operation, 96.3 MB of additional disk space will be used.
==&gt; default: WARNING: The following packages cannot be authenticated!
==&gt; default:   libaio1 mysql-common libmysqlclient18 libnet-daemon-perl libplrpc-perl
==&gt; default:   libdbi-perl libdbd-mysql-perl mysql-client-core-5.5 libterm-readkey-perl
==&gt; default:   mysql-client-5.5 mysql-server-core-5.5 mysql-server-5.5
==&gt; default:   libhtml-template-perl mysql-server
==&gt; default: E: There are problems and -y was used without --force-yes
==&gt; default: notice: /Stage[main]/Aegir::Mysql/File[setmysqlpass.sh]: Dependency Package[mysql-server] has failures: true
==&gt; default: warning: /Stage[main]/Aegir::Mysql/File[setmysqlpass.sh]: Skipping because of failed dependencies
==&gt; default: notice: /Stage[main]/Aegir::Mysql/Service[mysql]: Dependency Package[mysql-server] has failures: true
==&gt; default: warning: /Stage[main]/Aegir::Mysql/Service[mysql]: Skipping because of failed dependencies
==&gt; default: notice: /Stage[main]/Aegir::Mysql/Exec[change mysql root password]: Dependency Package[mysql-server] has failures: true
==&gt; default: warning: /Stage[main]/Aegir::Mysql/Exec[change mysql root password]: Skipping because of failed dependencies
==&gt; default: err: /Stage[main]/Aegir::Mysql/Exec[change mysql root password]: Failed to call refresh: Could not find command '/usr/bin/mysqladmin'
==&gt; default: notice: /Stage[main]/Aegir::Mysql/Exec[mysql_secure_installation]: Dependency Package[mysql-server] has failures: true
==&gt; default: warning: /Stage[main]/Aegir::Mysql/Exec[mysql_secure_installation]: Skipping because of failed dependencies
==&gt; default: notice: /Stage[main]/Aegir::Mysql::Preseed/File[preseedmysqlpass.sh]/ensure: defined content as '{md5}cf716d667b4f77e6c887bcede81e63c2'
==&gt; default: notice: /Stage[main]/Aegir::Mysql::Preseed/Exec[preseed mysql password]: Dependency Package[mysql-server] has failures: true
==&gt; default: warning: /Stage[main]/Aegir::Mysql::Preseed/Exec[preseed mysql password]: Skipping because of failed dependencies
==&gt; default: notice: /Stage[main]/Aegir::Apt/File[aegir_apt_keys_dir]/ensure: created
==&gt; default: notice: /Stage[main]/Aegir::Apt/File[aegir_apt_key]/ensure: defined content as '{md5}c68f07d8791bb73bd013a7fc758bff8a'
==&gt; default: notice: /Stage[main]/Aegir::Apt/Exec[aegir_apt_key_add]: Triggered 'refresh' from 1 events
==&gt; default: notice: /Stage[main]/Aegir::Apt/File[aegir_apt_sources]/ensure: created
==&gt; default: err: /Stage[main]/Aegir::Apt/Exec[aegir_apt_update]/returns: change from notrun to 0 failed: /usr/bin/apt-get update &amp;&amp; /usr/bin/apt-get autoclean returned 100 instead of one of [0] at /tmp/vagrant-puppet-3/modules-0/aegir/manifests/apt.pp:58
==&gt; default: notice: /Stage[main]/Aegir::Apt/Exec[aegir_update_apt]: Dependency Package[drush] has failures: true
==&gt; default: warning: /Stage[main]/Aegir::Apt/Exec[aegir_update_apt]: Skipping because of failed dependencies
==&gt; default: err: /Stage[main]/Aegir::Apt/Exec[aegir_update_apt]: Failed to call refresh: /usr/bin/apt-get update returned 100 instead of one of [0] at /tmp/vagrant-puppet-3/modules-0/aegir/manifests/apt.pp:52
==&gt; default: notice: /Stage[main]/Aegir/Package[aegir2]: Dependency Exec[aegir_apt_update] has failures: true
==&gt; default: notice: /Stage[main]/Aegir/Package[aegir2]: Dependency Package[mysql-server] has failures: true
==&gt; default: notice: /Stage[main]/Aegir/Package[aegir2]: Dependency Package[drush] has failures: true
==&gt; default: warning: /Stage[main]/Aegir/Package[aegir2]: Skipping because of failed dependencies
==&gt; default: notice: /Stage[main]/Aegir/Drush::En[hosting_queued]/Drush::Run[drush-en:hosting_queued]/Exec[drush-run:drush-en:hosting_queued]: Dependency Exec[aegir_apt_update] has failures: true
==&gt; default: notice: /Stage[main]/Aegir/Drush::En[hosting_queued]/Drush::Run[drush-en:hosting_queued]/Exec[drush-run:drush-en:hosting_queued]: Dependency Package[mysql-server] has failures: true
==&gt; default: notice: /Stage[main]/Aegir/Drush::En[hosting_queued]/Drush::Run[drush-en:hosting_queued]/Exec[drush-run:drush-en:hosting_queued]: Dependency Package[drush] has failures: true
==&gt; default: warning: /Stage[main]/Aegir/Drush::En[hosting_queued]/Drush::Run[drush-en:hosting_queued]/Exec[drush-run:drush-en:hosting_queued]: Skipping because of failed dependencies
==&gt; default: notice: /Stage[main]/Aegir/Service[hosting-queued]: Dependency Exec[aegir_apt_update] has failures: true
==&gt; default: notice: /Stage[main]/Aegir/Service[hosting-queued]: Dependency Package[mysql-server] has failures: true
==&gt; default: notice: /Stage[main]/Aegir/Service[hosting-queued]: Dependency Package[drush] has failures: true
==&gt; default: warning: /Stage[main]/Aegir/Service[hosting-queued]: Skipping because of failed dependencies
==&gt; default: notice: Finished catalog run in 15.79 seconds
The following SSH command responded with a non-zero exit status.
Vagrant assumes that this means the command failed!

puppet apply --modulepath '/tmp/vagrant-puppet-3/modules-0:/etc/puppet/modules' --color=false --manifestdir /tmp/vagrant-puppet-3/manifests --detailed-exitcodes /tmp/vagrant-puppet-3/manifests/nodes.pp

Stdout from the command:

warning: Could not retrieve fact fqdn
warning: Host is missing hostname and/or domain: aegir2-unstable
err: /Stage[main]/Drush::Apt::Update/Exec[drush_apt_update]/returns: change from notrun to 0 failed: apt-get update &amp;&amp; /usr/bin/apt-get autoclean returned 100 instead of one of [0] at /tmp/vagrant-puppet-3/modules-0/drush/manifests/apt/update.pp:13
err: /Stage[main]/Drush/Package[drush]/ensure: change from purged to present failed: Execution of '/usr/bin/apt-get -q -y -o DPkg::Options::=--force-confold install drush' returned 100: Reading package lists...
Building dependency tree...
Reading state information...
The following extra packages will be installed:
  libmysqlclient18 mysql-common php-console-table php-pear php5-cli
  php5-common php5-mysql
Suggested packages:
  git mysql-client drupal php5-dev
The following NEW packages will be installed:
  drush libmysqlclient18 mysql-common php-console-table php-pear php5-cli
  php5-common php5-mysql
0 upgraded, 8 newly installed, 0 to remove and 0 not upgraded.
Need to get 0 B/4805 kB of archives.
After this operation, 17.0 MB of additional disk space will be used.
WARNING: The following packages cannot be authenticated!
  mysql-common libmysqlclient18 php5-common php5-cli php5-mysql php-pear
  php-console-table drush
E: There are problems and -y was used without --force-yes
notice: /Stage[main]/Aegir/File[/etc/apt/preferences.d/drush.pref]: Dependency Package[drush] has failures: true
warning: /Stage[main]/Aegir/File[/etc/apt/preferences.d/drush.pref]: Skipping because of failed dependencies
notice: /Stage[main]/Aegir/File[/etc/apt/preferences.d/drush-squeeze.pref]: Dependency Package[drush] has failures: true
warning: /Stage[main]/Aegir/File[/etc/apt/preferences.d/drush-squeeze.pref]: Skipping because of failed dependencies
notice: /Stage[main]/Aegir/Aegir::Apt::Debconf[aegir/webserver string apache2]/Exec[aegir/webserver string apache2]: Dependency Package[drush] has failures: true
warning: /Stage[main]/Aegir/Aegir::Apt::Debconf[aegir/webserver string apache2]/Exec[aegir/webserver string apache2]: Skipping because of failed dependencies
notice: /Stage[main]/Aegir/Package[aegir]: Dependency Package[drush] has failures: true
warning: /Stage[main]/Aegir/Package[aegir]: Skipping because of failed dependencies
notice: /Stage[main]/Aegir::Mysql/File[/root/.my.cnf]/ensure: defined content as '{md5}4a46211f6cffff92d3d53a924772edd3'
err: /Stage[main]/Aegir::Mysql/Package[mysql-server]/ensure: change from purged to present failed: Execution of '/usr/bin/apt-get -q -y -o DPkg::Options::=--force-confold install mysql-server' returned 100: Reading package lists...
Building dependency tree...
Reading state information...
The following extra packages will be installed:
  libaio1 libdbd-mysql-perl libdbi-perl libhtml-template-perl libmysqlclient18
  libnet-daemon-perl libplrpc-perl libterm-readkey-perl mysql-client-5.5
  mysql-client-core-5.5 mysql-common mysql-server-5.5 mysql-server-core-5.5
Suggested packages:
  libipc-sharedcache-perl tinyca mailx
The following NEW packages will be installed:
  libaio1 libdbd-mysql-perl libdbi-perl libhtml-template-perl libmysqlclient18
  libnet-daemon-perl libplrpc-perl libterm-readkey-perl mysql-client-5.5
  mysql-client-core-5.5 mysql-common mysql-server mysql-server-5.5
  mysql-server-core-5.5
0 upgraded, 14 newly installed, 0 to remove and 0 not upgraded.
Need to get 0 B/26.8 MB of archives.
After this operation, 96.3 MB of additional disk space will be used.
WARNING: The following packages cannot be authenticated!
  libaio1 mysql-common libmysqlclient18 libnet-daemon-perl libplrpc-perl
  libdbi-perl libdbd-mysql-perl mysql-client-core-5.5 libterm-readkey-perl
  mysql-client-5.5 mysql-server-core-5.5 mysql-server-5.5
  libhtml-template-perl mysql-server
E: There are problems and -y was used without --force-yes
notice: /Stage[main]/Aegir::Mysql/File[setmysqlpass.sh]: Dependency Package[mysql-server] has failures: true
warning: /Stage[main]/Aegir::Mysql/File[setmysqlpass.sh]: Skipping because of failed dependencies
notice: /Stage[main]/Aegir::Mysql/Service[mysql]: Dependency Package[mysql-server] has failures: true
warning: /Stage[main]/Aegir::Mysql/Service[mysql]: Skipping because of failed dependencies
notice: /Stage[main]/Aegir::Mysql/Exec[change mysql root password]: Dependency Package[mysql-server] has failures: true
warning: /Stage[main]/Aegir::Mysql/Exec[change mysql root password]: Skipping because of failed dependencies
err: /Stage[main]/Aegir::Mysql/Exec[change mysql root password]: Failed to call refresh: Could not find command '/usr/bin/mysqladmin'
notice: /Stage[main]/Aegir::Mysql/Exec[mysql_secure_installation]: Dependency Package[mysql-server] has failures: true
warning: /Stage[main]/Aegir::Mysql/Exec[mysql_secure_installation]: Skipping because of failed dependencies
notice: /Stage[main]/Aegir::Mysql::Preseed/File[preseedmysqlpass.sh]/ensure: defined content as '{md5}cf716d667b4f77e6c887bcede81e63c2'
notice: /Stage[main]/Aegir::Mysql::Preseed/Exec[preseed mysql password]: Dependency Package[mysql-server] has failures: true
warning: /Stage[main]/Aegir::Mysql::Preseed/Exec[preseed mysql password]: Skipping because of failed dependencies
notice: /Stage[main]/Aegir::Apt/File[aegir_apt_keys_dir]/ensure: created
notice: /Stage[main]/Aegir::Apt/File[aegir_apt_key]/ensure: defined content as '{md5}c68f07d8791bb73bd013a7fc758bff8a'
notice: /Stage[main]/Aegir::Apt/Exec[aegir_apt_key_add]: Triggered 'refresh' from 1 events
notice: /Stage[main]/Aegir::Apt/File[aegir_apt_sources]/ensure: created
err: /Stage[main]/Aegir::Apt/Exec[aegir_apt_update]/returns: change from notrun to 0 failed: /usr/bin/apt-get update &amp;&amp; /usr/bin/apt-get autoclean returned 100 instead of one of [0] at /tmp/vagrant-puppet-3/modules-0/aegir/manifests/apt.pp:58
notice: /Stage[main]/Aegir::Apt/Exec[aegir_update_apt]: Dependency Package[drush] has failures: true
warning: /Stage[main]/Aegir::Apt/Exec[aegir_update_apt]: Skipping because of failed dependencies
err: /Stage[main]/Aegir::Apt/Exec[aegir_update_apt]: Failed to call refresh: /usr/bin/apt-get update returned 100 instead of one of [0] at /tmp/vagrant-puppet-3/modules-0/aegir/manifests/apt.pp:52
notice: /Stage[main]/Aegir/Package[aegir2]: Dependency Exec[aegir_apt_update] has failures: true
notice: /Stage[main]/Aegir/Package[aegir2]: Dependency Package[mysql-server] has failures: true
notice: /Stage[main]/Aegir/Package[aegir2]: Dependency Package[drush] has failures: true
warning: /Stage[main]/Aegir/Package[aegir2]: Skipping because of failed dependencies
notice: /Stage[main]/Aegir/Drush::En[hosting_queued]/Drush::Run[drush-en:hosting_queued]/Exec[drush-run:drush-en:hosting_queued]: Dependency Exec[aegir_apt_update] has failures: true
notice: /Stage[main]/Aegir/Drush::En[hosting_queued]/Drush::Run[drush-en:hosting_queued]/Exec[drush-run:drush-en:hosting_queued]: Dependency Package[mysql-server] has failures: true
notice: /Stage[main]/Aegir/Drush::En[hosting_queued]/Drush::Run[drush-en:hosting_queued]/Exec[drush-run:drush-en:hosting_queued]: Dependency Package[drush] has failures: true
warning: /Stage[main]/Aegir/Drush::En[hosting_queued]/Drush::Run[drush-en:hosting_queued]/Exec[drush-run:drush-en:hosting_queued]: Skipping because of failed dependencies
notice: /Stage[main]/Aegir/Service[hosting-queued]: Dependency Exec[aegir_apt_update] has failures: true
notice: /Stage[main]/Aegir/Service[hosting-queued]: Dependency Package[mysql-server] has failures: true
notice: /Stage[main]/Aegir/Service[hosting-queued]: Dependency Package[drush] has failures: true
warning: /Stage[main]/Aegir/Service[hosting-queued]: Skipping because of failed dependencies
notice: Finished catalog run in 15.79 seconds


Stderr from the command:

'vagrant up' failed. Leaving vm in place for forensic analysis.
Build step 'Execute shell' marked build as failure
Finished: FAILURE
